{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import EditProfileScreen from\"../../components/EditProfileScreen\";import{Row,Col,Image,ListGroup,Button}from\"react-bootstrap\";import{deleteAccount,logout}from\"../../store/actions/userActions\";import{listProductCategories}from\"../../store/actions/categoriesActions\";import\"./index.css\";import DeletePopup from\"../../components/DeletePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(){const[editProfile,setEditProfile]=useState(false);const[deleteConfirm,setDeleteConfirm]=useState(null);const[deleteWindow,setDeleteWindow]=useState(false);const[itemToDelete,setItemToDelete]=useState(null);const[type,setType]=useState(null);const dispatch=useDispatch();const navigate=useNavigate();const{user}=useSelector(state=>state.myDetails);const profile=user===null||user===void 0?void 0:user.profile;useEffect(()=>{if(deleteConfirm===\"account\"){setDeleteConfirm(null);setDeleteWindow(false);setTimeout(()=>{dispatch(deleteAccount(itemToDelete));dispatch(logout());navigate(\"/\");},50);}dispatch(listProductCategories);},[dispatch,deleteConfirm,itemToDelete]);const deleteUser=()=>{setType(\"account\");setDeleteWindow(true);setItemToDelete(user.id);};return/*#__PURE__*/_jsxs(_Fragment,{children:[!editProfile&&profile.status===\"STORE_OWNER\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{className:\"mt-4 justify-content-center\",children:/*#__PURE__*/_jsx(Image,{className:\"profile-img\",src:user.profile.image})}),/*#__PURE__*/_jsx(Row,{className:\"mt-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),user.username]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),user.email]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status: \"}),\"Seller\"]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category: \"}),console.log(profile),profile.categoryDetails.map(category=>{return/*#__PURE__*/_jsx(\"li\",{children:category.name});})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Industry: \"}),profile.industry]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Headquarter: \"}),profile.headquarter]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description: \"}),profile.description]})]})})})]}),!editProfile&&profile.status===\"CUSTOMER\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{className:\"mt-4 justify-content-center\",children:/*#__PURE__*/_jsx(Image,{className:\"profile-img\",src:user.profile.image})}),/*#__PURE__*/_jsx(Row,{className:\"mt-3 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),user.username]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),user.email]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status: \"}),\"Customer\"]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Joined: \"}),user.date_joined.substring(0,10)]}),user.last_login&&/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Login: \"}),user.last_login.substring(0,10)]})]})})})]}),editProfile&&/*#__PURE__*/_jsx(EditProfileScreen,{}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center mt-4\",children:/*#__PURE__*/_jsx(Button,{className:\"mt-3\",onClick:()=>setEditProfile(!editProfile),children:!editProfile?\"Edit Profile\":\"Back to Profile\"})}),!editProfile&&/*#__PURE__*/_jsx(Row,{className:\"justify-content-center mt-4\",children:/*#__PURE__*/_jsx(Button,{onClick:()=>deleteUser(),className:\"mt-3 btn-danger\",children:\"Delete Your Account\"})}),deleteWindow&&/*#__PURE__*/_jsx(DeletePopup,{setDeleteWindow:setDeleteWindow,setDeleteConfirm:setDeleteConfirm,item:{type:type,details:itemToDelete}})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useDispatch","useSelector","EditProfileScreen","Row","Col","Image","ListGroup","Button","deleteAccount","logout","listProductCategories","DeletePopup","Profile","editProfile","setEditProfile","deleteConfirm","setDeleteConfirm","deleteWindow","setDeleteWindow","itemToDelete","setItemToDelete","type","setType","dispatch","navigate","user","state","myDetails","profile","setTimeout","deleteUser","id","status","image","username","email","console","log","categoryDetails","map","category","name","industry","headquarter","description","date_joined","substring","last_login","details"],"sources":["/Users/umit/Desktop/shopping-land express-react/shopping-land/frontend/src/containers/MyProfile/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport EditProfileScreen from \"../../components/EditProfileScreen\";\nimport { Row, Col, Image, ListGroup, Button } from \"react-bootstrap\";\nimport { deleteAccount, logout } from \"../../store/actions/userActions\";\nimport { listProductCategories } from \"../../store/actions/categoriesActions\";\nimport \"./index.css\";\nimport DeletePopup from \"../../components/DeletePopup\";\n\nfunction Profile() {\n  const [editProfile, setEditProfile] = useState(false);\n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [deleteWindow, setDeleteWindow] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState(null);\n  const [type, setType] = useState(null);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const { user } = useSelector((state) => state.myDetails);\n\n  const profile = user?.profile;\n\n  useEffect(() => {\n    if (deleteConfirm === \"account\") {\n      setDeleteConfirm(null);\n      setDeleteWindow(false);\n      setTimeout(() => {\n        dispatch(deleteAccount(itemToDelete));\n        dispatch(logout());\n        navigate(\"/\");\n      }, 50);\n    }\n    dispatch(listProductCategories);\n  }, [dispatch, deleteConfirm, itemToDelete]);\n\n  const deleteUser = () => {\n    setType(\"account\");\n    setDeleteWindow(true);\n    setItemToDelete(user.id);\n  };\n\n  return (\n    <>\n      {!editProfile && profile.status === \"STORE_OWNER\" && (\n        <>\n          <Row className=\"mt-4 justify-content-center\">\n            <Image className=\"profile-img\" src={user.profile.image} />\n          </Row>\n          <Row className=\"mt-3 d-flex justify-content-center\">\n            <Col md={4}>\n              <ListGroup variant=\"flush\">\n                <ListGroup.Item>\n                  <strong>Name: </strong>\n                  {user.username}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Email: </strong>\n                  {user.email}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Status: </strong>Seller\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Category: </strong>\n                  {console.log(profile)}\n                  {profile.categoryDetails.map((category) => {\n                    return <li>{category.name}</li>;\n                  })}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Industry: </strong>\n                  {profile.industry}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Headquarter: </strong>\n                  {profile.headquarter}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Description: </strong>\n                  {profile.description}\n                </ListGroup.Item>\n              </ListGroup>\n            </Col>\n          </Row>\n        </>\n      )}\n      {!editProfile && profile.status === \"CUSTOMER\" && (\n        <>\n          <Row className=\"mt-4 justify-content-center\">\n            <Image className=\"profile-img\" src={user.profile.image} />\n          </Row>\n          <Row className=\"mt-3 d-flex justify-content-center\">\n            <Col md={4}>\n              <ListGroup variant=\"flush\">\n                <ListGroup.Item>\n                  <strong>Name: </strong>\n                  {user.username}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Email: </strong>\n                  {user.email}\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Status: </strong>Customer\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <strong>Date Joined: </strong>\n                  {user.date_joined.substring(0, 10)}\n                </ListGroup.Item>\n                {user.last_login && (\n                  <ListGroup.Item>\n                    <strong>Last Login: </strong>\n                    {user.last_login.substring(0, 10)}\n                  </ListGroup.Item>\n                )}\n              </ListGroup>\n            </Col>\n          </Row>\n        </>\n      )}\n\n      {editProfile && <EditProfileScreen />}\n\n      <Row className=\"justify-content-center mt-4\">\n        <Button className=\"mt-3\" onClick={() => setEditProfile(!editProfile)}>\n          {!editProfile ? \"Edit Profile\" : \"Back to Profile\"}\n        </Button>\n      </Row>\n      {!editProfile && (\n        <Row className=\"justify-content-center mt-4\">\n          <Button onClick={() => deleteUser()} className=\"mt-3 btn-danger\">\n            Delete Your Account\n          </Button>\n        </Row>\n      )}\n      {deleteWindow && (\n        <DeletePopup\n          setDeleteWindow={setDeleteWindow}\n          setDeleteConfirm={setDeleteConfirm}\n          item={{ type: type, details: itemToDelete }}\n        />\n      )}\n    </>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}