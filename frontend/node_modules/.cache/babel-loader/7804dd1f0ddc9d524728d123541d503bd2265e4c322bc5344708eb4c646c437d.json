{"ast":null,"code":"var _jsxFileName = \"/Users/umit/Desktop/shopping-land express-react/shopping-land/frontend/src/containers/Map/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Map as MapGl } from \"react-map-gl\";\nimport { Container, Nav, Row } from \"react-bootstrap\";\nimport \"./index.css\";\nimport { Popup, Marker } from \"react-map-gl\";\nimport Loader from \"../../components/Loader\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport SearchBox from \"../../components/SearchBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Map() {\n  _s();\n  var _stores;\n  let zoomNumber;\n  window.innerWidth < 991 ? zoomNumber = 6.5 : zoomNumber = 7.7;\n  const [value, setValue] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [selectedStore, setSelectedStore] = useState(null);\n  const [viewState, setViewState] = useState({\n    latitude: 46.826908,\n    longitude: 7.944633,\n    zoom: zoomNumber\n  });\n  const {\n    stores: searchResult\n  } = useSelector(state => state.storeList);\n  const {\n    data: dataResult,\n    isLoading: loadingStores\n  } = useQuery([\"stores\", filter], () => axios.get(`/api/search/?type=stores&search_string=${filter}`).then(res => res.data));\n  const {\n    data: categories\n  } = useQuery([\"product-categories\"], () => axios.get(\"/api/products/categories/\").then(res => res.data));\n  let stores;\n  if (value.length > 0) {\n    stores = searchResult;\n  } else {\n    stores = dataResult;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: [/*#__PURE__*/_jsxDEV(SearchBox, {\n        searchProps: {\n          type: \"map\"\n        },\n        actionType: \"STORE_LIST_RESET\",\n        value: value,\n        setValue: setValue,\n        placeholder: \"Search by name (ex: digitec, nike)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Nav, {\n          className: \"justify-content-evenly map-categories-bar\",\n          children: categories === null || categories === void 0 ? void 0 : categories.map(category => {\n            return /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                className: \"map-categories-link\",\n                onClick: () => setFilter(category.name),\n                children: category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 19\n              }, this)\n            }, category.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"map\",\n        children: /*#__PURE__*/_jsxDEV(MapGl, {\n          ...viewState,\n          mapboxAccessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n          mapStyle: \"mapbox://styles/mapbox/light-v11\",\n          onMove: evt => setViewState(evt.viewState),\n          children: loadingStores ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this) : (_stores = stores) === null || _stores === void 0 ? void 0 : _stores.map((store, index) => {\n            return /*#__PURE__*/_jsxDEV(Marker, {\n              latitude: store.latitude,\n              longitude: store.longitude,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"marker-btn\",\n                onClick: () => {\n                  setSelectedStore(null);\n                  setSelectedStore(store);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"map-seller-image\",\n                  src: store.profile_image,\n                  alt: \"Store Icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 21\n              }, this), selectedStore ? /*#__PURE__*/_jsxDEV(Popup, {\n                latitude: selectedStore.latitude,\n                longitude: selectedStore.longitude,\n                closeOnClick: false,\n                closeButton: true,\n                focusAfterOpen: true,\n                onClose: () => {\n                  setSelectedStore(null);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"map-store-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-center mt-1\",\n                    children: selectedStore.owner_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"text-center mt-1\",\n                    children: selectedStore.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: selectedStore.image,\n                    alt: \"Store Icon\",\n                    className: \"map-store-image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: \"0\",\n                      padding: \"0\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Address: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 29\n                    }, this), selectedStore.address]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-center\",\n                      style: {\n                        margin: \"0\",\n                        padding: \"0\"\n                      },\n                      children: [\"Go to\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: `#/seller/${selectedStore.owner_id}`,\n                        children: selectedStore.owner_name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 137,\n                        columnNumber: 31\n                      }, this), \"'s page\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 23\n              }, this) : null]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Map, \"GK7h0cAExFZDrdKd47NERV2rVRg=\", false, function () {\n  return [useSelector, useQuery, useQuery];\n});\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","useSelector","Map","MapGl","Container","Nav","Row","Popup","Marker","Loader","useQuery","axios","SearchBox","zoomNumber","window","innerWidth","value","setValue","filter","setFilter","selectedStore","setSelectedStore","viewState","setViewState","latitude","longitude","zoom","stores","searchResult","state","storeList","data","dataResult","isLoading","loadingStores","get","then","res","categories","length","type","map","category","name","id","process","env","REACT_APP_MAPBOX_TOKEN","evt","store","index","profile_image","owner_name","image","margin","padding","address","owner_id"],"sources":["/Users/umit/Desktop/shopping-land express-react/shopping-land/frontend/src/containers/Map/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Map as MapGl } from \"react-map-gl\";\nimport { Container, Nav, Row } from \"react-bootstrap\";\nimport \"./index.css\";\nimport { Popup, Marker } from \"react-map-gl\";\nimport Loader from \"../../components/Loader\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport SearchBox from \"../../components/SearchBox\";\n\nfunction Map() {\n  let zoomNumber;\n  window.innerWidth < 991 ? (zoomNumber = 6.5) : (zoomNumber = 7.7);\n\n  const [value, setValue] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [selectedStore, setSelectedStore] = useState(null);\n\n  const [viewState, setViewState] = useState({\n    latitude: 46.826908,\n    longitude: 7.944633,\n    zoom: zoomNumber,\n  });\n\n  const { stores: searchResult } = useSelector((state) => state.storeList);\n\n  const { data: dataResult, isLoading: loadingStores } = useQuery(\n    [\"stores\", filter],\n    () =>\n      axios\n        .get(`/api/search/?type=stores&search_string=${filter}`)\n        .then((res) => res.data)\n  );\n\n  const { data: categories } = useQuery([\"product-categories\"], () =>\n    axios.get(\"/api/products/categories/\").then((res) => res.data)\n  );\n\n  let stores;\n  if (value.length > 0) {\n    stores = searchResult;\n  } else {\n    stores = dataResult;\n  }\n\n  return (\n    <>\n      <Container fluid>\n        <SearchBox\n          searchProps={{ type: \"map\" }}\n          actionType=\"STORE_LIST_RESET\"\n          value={value}\n          setValue={setValue}\n          placeholder=\"Search by name (ex: digitec, nike)\"\n        />\n        <Row>\n          <Nav className=\"justify-content-evenly map-categories-bar\">\n            {categories?.map((category) => {\n              return (\n                <Nav.Item key={category.id}>\n                  <Nav.Link\n                    className=\"map-categories-link\"\n                    onClick={() => setFilter(category.name)}\n                  >\n                    {category.name}\n                  </Nav.Link>\n                </Nav.Item>\n              );\n            })}\n          </Nav>\n        </Row>\n        <Row className=\"map\">\n          <MapGl\n            {...viewState}\n            mapboxAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n            mapStyle=\"mapbox://styles/mapbox/light-v11\"\n            onMove={(evt) => setViewState(evt.viewState)}\n          >\n            {loadingStores ? (\n              <Loader />\n            ) : (\n              stores?.map((store, index) => {\n                return (\n                  <Marker\n                    key={index}\n                    latitude={store.latitude}\n                    longitude={store.longitude}\n                  >\n                    <button\n                      className=\"marker-btn\"\n                      onClick={() => {\n                        setSelectedStore(null);\n                        setSelectedStore(store);\n                      }}\n                    >\n                      <img\n                        className=\"map-seller-image\"\n                        src={store.profile_image}\n                        alt=\"Store Icon\"\n                      />\n                    </button>\n\n                    {selectedStore ? (\n                      <Popup\n                        latitude={selectedStore.latitude}\n                        longitude={selectedStore.longitude}\n                        closeOnClick={false}\n                        closeButton={true}\n                        focusAfterOpen\n                        onClose={() => {\n                          setSelectedStore(null);\n                        }}\n                      >\n                        <div className=\"map-store-container\">\n                          <h4 className=\"text-center mt-1\">\n                            {selectedStore.owner_name}\n                          </h4>\n                          <h5 className=\"text-center mt-1\">\n                            {selectedStore.name}\n                          </h5>\n                          <img\n                            src={selectedStore.image}\n                            alt=\"Store Icon\"\n                            className=\"map-store-image\"\n                          />\n                          <p style={{ margin: \"0\", padding: \"0\" }}>\n                            <strong>Address: </strong>\n                            {selectedStore.address}\n                          </p>\n                          <strong>\n                            <p\n                              className=\"text-center\"\n                              style={{ margin: \"0\", padding: \"0\" }}\n                            >\n                              Go to{\" \"}\n                              <a href={`#/seller/${selectedStore.owner_id}`}>\n                                {selectedStore.owner_name}\n                              </a>\n                              's page\n                            </p>\n                          </strong>\n                        </div>\n                      </Popup>\n                    ) : null}\n                  </Marker>\n                );\n              })\n            )}\n          </MapGl>\n        </Row>\n      </Container>\n    </>\n  );\n}\n\nexport default Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}